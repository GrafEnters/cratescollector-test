# Crates Collector

Игра-коллектор предметов с системой инвентаря, реализованная на Unity 6+ с использованием UI Toolkit.


https://github.com/user-attachments/assets/345daa13-e9c1-44bb-9c97-8db4b729ace0


## Описание

Игра представляет собой простой симулятор сбора предметов, где игрок может перемещаться по сцене, собирать предметы и управлять ими через систему инвентаря с drag & drop функциональностью.

## Основные возможности

### Персонаж
- Контроллер персонажа с движением WASD
- Камера от третьего лица с настраиваемыми параметрами
- Ограничение движения в пределах платформы

### Предметы
- Система спавна предметов на сцене (настраиваемое количество)
- Данные предметов загружаются из JSON файла (`Resources/ItemsData.json`)
- Поддержка stackable и non-stackable предметов
- Система пула объектов для оптимизации (настраиваемый размер пула)
- Подсветка предметов при приближении (outline эффект с настраиваемыми параметрами)
- Подсказка "Нажмите E" при приближении к предмету
- Автоматическое избегание спавна предметов слишком близко друг к другу и к игроку

### Инвентарь
- UI-окно с сеткой слотов (настраиваемое количество, по умолчанию 12)
- Открытие/закрытие по клавише Tab
- Управление курсором при открытии/закрытии инвентаря
- Drag & drop предметов между ячейками
- Выброс предметов из инвентаря обратно в мир (ПКМ или перетаскивание за пределы окна)
- Выброс стека предметов
- Отображение количества для stackable предметов
- Уведомление о переполнении инвентаря

### Системы
- Dependency Injection контейнер для управления зависимостями
- Конфигурация через ScriptableObject (`MainGameConfig`)
- Система детекции предметов в радиусе
- Визуальная фабрика для создания предметов

## Технические требования

- **Unity**: 6.0.2.12f1 или выше
- **UI**: UI Toolkit (USS, UXML)
- **Язык**: C#
- **Входные данные**: Unity Input System

## Структура проекта

```
Assets/
├── Scripts/
│   ├── Core/              # Ядро системы (DI, конфигурация, фабрики)
│   ├── Data/              # Модели данных (ItemData, InventorySlot, MainGameConfig)
│   ├── Inventory/         # Логика инвентаря
│   ├── Items/             # Логика предметов (спавн, подсветка, сбор)
│   ├── Player/            # Контроллер игрока и камера
│   └── UI/                # UI компоненты (инвентарь, подсказки, уведомления)
├── Resources/
│   ├── ItemsData.json     # Данные предметов
│   ├── InventoryWindow.uxml  # UI шаблон инвентаря
│   ├── InventoryWindow.uss  # Стили инвентаря
│   └── MainGameConfig.asset  # Конфигурация игры
├── Scenes/
│   └── CoreScene.unity    # Основная сцена
├── Shaders/
│   ├── Outline.shader
│   └── OutlinePostProcess.shader
└── Other/
    └── InputSystem_Actions.inputactions
```

## Установка и запуск

1. Клонируйте репозиторий
2. Откройте проект в Unity 6.0.2.12f1 или выше
3. Дождитесь импорта всех ассетов
4. Откройте сцену `Assets/Scenes/CoreScene.unity`
5. Нажмите Play

## Управление

- **WASD** - движение персонажа
- **Tab** - открыть/закрыть инвентарь
- **E** - подобрать предмет (при приближении)
- **ЛКМ** - drag & drop предметов в инвентаре
- **ПКМ** - выбросить предмет из инвентаря (один предмет или весь стек)

## Настройка

Основные параметры игры настраиваются через `MainGameConfig` ScriptableObject:
- Параметры игрока (скорость движения, скорость поворота)
- Параметры инвентаря (количество слотов, блокировка обзора при открытии)
- Параметры спавна предметов (количество, радиус, минимальные расстояния, высота, масштаб, максимальное количество попыток)
- Параметры пула объектов (размер пула)
- Параметры камеры (дистанция, высота, скорость поворота, ограничения углов)
- Параметры подбора (дистанция, высота подсказки)
- Параметры подсветки (цвет, ширина)

Данные предметов настраиваются в `Resources/ItemsData.json`:
- ID предмета
- Название
- Цвет (RGBA)
- Stackable (можно ли складывать)
- MaxStack (максимальный размер стака)

## Архитектура

Проект использует следующие паттерны и подходы:

- **Dependency Injection** - через `DIContainer` для слабой связанности компонентов
- **Factory Pattern** - для создания предметов через `IItemFactory` и визуальных представлений через `ItemVisualFactory`
- **Object Pooling** - для оптимизации создания/уничтожения предметов через `ItemPool`
- **State Provider** - для управления состоянием инвентаря через `IInventoryStateProvider`
- **Configuration Pattern** - централизованная конфигурация через ScriptableObject (`MainGameConfig`)
- **Interface Segregation** - использование интерфейсов (`IItemDetector`, `IItemOutlineManager`, `IConfigProvider`) для разделения ответственности

## Расширение функциональности

Для добавления нового типа предмета:
1. Добавьте запись в `Resources/ItemsData.json`
2. Предмет автоматически появится в списке доступных для спавна

Для изменения количества слотов инвентаря:
1. Измените параметр `InventorySlotCount` в `MainGameConfig`
2. Обновите UXML шаблон инвентаря, если требуется изменить визуальное отображение
